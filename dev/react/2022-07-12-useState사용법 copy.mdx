---
slug: useState_사용법
title: Hook - useState 사용법
authors: [yjh]
tags: [리액트, Hook, useState]
draft: true
---

<div className="preview">useState를 사용하는 방법을 알아보자</div>

<!--truncate-->

useState를 사용하는 방법을 알아보자

> <a href="/dev/react/hook이란" target="_blank">
>   Hook 이란?
> </a>

## 사용법

기본적으로 아래와 같이 사용하면되고 사용 시엔 `불변성`을 꼭 지켜줘야한다.

<!-- https://berkbach.com/setstate-%ED%8C%8C%ED%97%A4%EC%B9%98%EA%B8%B0-28b207fc81df -->
<!-- https://sangcho.tistory.com/entry/Commons-Mistakes-with-React-useState -->

```js
const [state, setState] = useState({
  title: '호롤롤로롤',
  content: '공백',
});
```

> <a href="/dev/react/불변성을_지켜야_하는_이유" target="_blank">
>   리액트에서 불변성을 지켜줘야 하는 이유
> </a>

<br />

상태 값 변경은 setState를 사용하면 된다.

```js
setState({
  ...state,
  content: 'ㅋㅋㅋㅋㅋㅋㅋ',
});
```

> setState를 사용하지 않고 직접 값을 변경하게 되면 리액트가 render 함수를 호출하지 않아 상태가 변경되어도 렌더링 되지 않는다. 또한 리액트는 setState를 실행했을때 이전 값과 비교 후 리렌더링 여부를 판단하기 때문에 직접적으로 값을 변경해선 안된다.

## 참고

`setState는 비동기적으로 동작한다.`

```js
const [counter, setCounter] = useState(0);

setCounter(counter + 1);
console.log(counter); // result: 0

useEffect(() => {
  console.log(counter); // result: 1
}, [counter]);
```

<br />

또한 같은 키를 가진 작업이 있을경우 `하나로 합쳐서 마지막에 있는 내용만 처리`한다.

```js
setCounter(counter + 1);
setCounter(counter + 1);
setCounter(counter + 5);
// result: 5
```

<br />

`updater에 인자값은 항상 최신 값으로 유지`되기 때문에 최신 값이 필요하거나 순차 실행이 필요할 땐 setState에 updater함수를 전달해서 사용한다.

```js
setCounter(prevCounter => prevCounter + 1);
setCounter(prevCounter => prevCounter + 1);
setCounter(prevCounter => prevCounter + 5);
// result: 7
```

> updater 사용 시 리액트는 해당 작업들을 하나로 합치는게 아닌 큐에 각각 하나씩 넣고 처리한다.
